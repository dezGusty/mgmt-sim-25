<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
  <div
    *ngFor="let req of requests"
    class="hover:shadow-md transition-shadow duration-300 border-l-4 rounded-lg bg-white border-l-blue-500"
  >
    <div class="p-6">
      <div class="flex justify-between items-start mb-4">
        <div class="flex items-center gap-2">
          <h3 class="text-lg font-semibold text-gray-900">
            {{ req.employee }}
          </h3>
        </div>
        <span
          class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border"
          [ngClass]="{
            'bg-yellow-100 text-yellow-800 border-yellow-200':
              req.status === 'Pending',
            'bg-green-100 text-green-800 border-green-200':
              req.status === 'Approved',
            'bg-red-100 text-red-800 border-red-200': req.status === 'Rejected'
          }"
        >
          <ng-container *ngIf="req.status === 'Pending'">
            <svg
              class="w-4 h-4"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 384 512"
            >
              <path
                fill="oklch(79.5% 0.184 86.047)"
                d="M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64l0 11c0 42.4 16.9 83.1 46.9 113.1L146.7 256 78.9 323.9C48.9 353.9 32 394.6 32 437l0 11c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 256 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-11c0-42.4-16.9-83.1-46.9-113.1L237.3 256l67.9-67.9c30-30 46.9-70.7 46.9-113.1l0-11c17.7 0 32-14.3 32-32s-14.3-32-32-32L320 0 64 0 32 0zM96 75l0-11 192 0 0 11c0 19-5.6 37.4-16 53L112 128c-10.3-15.6-16-34-16-53zm16 309c3.5-5.3 7.6-10.3 12.1-14.9L192 301.3l67.9 67.9c4.6 4.6 8.6 9.6 12.1 14.9L112 384z"
              />
            </svg>
          </ng-container>

          <ng-container *ngIf="req.status === 'Approved'">
            <svg
              class="w-4 h-4"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
            >
              <path
                fill="oklch(62.7% 0.194 149.214)"
                d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"
              />
            </svg>
          </ng-container>

          <ng-container *ngIf="req.status === 'Rejected'">
            <svg
              class="w-4 h-4"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
            >
              <path
                fill="oklch(57.7% 0.245 27.325)"
                d="M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"
              />
            </svg>
          </ng-container>

          {{ req.status }}
        </span>
      </div>
      <div class="space-y-3">
        <div class="flex items-center gap-2 text-sm text-gray-600">
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
          <span>{{ req.from }} - {{ req.to }}</span>
          <span
            class="ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs"
          >
            {{ req.days }} days
          </span>
        </div>
        <div class="flex items-start gap-2 text-sm text-gray-600">
          <svg
            class="w-4 h-4 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
          <p>{{ req.reason }}</p>
        </div>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <svg
            class="w-3 h-3"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
          <span>Submitted {{ req.submitted }}</span>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t">
        <button
          class="w-full border border-gray-300 rounded py-2 text-sm font-medium hover:bg-gray-50 hover:cursor-pointer"
          (click)="openDetails(req)"
        >
          View Details
        </button>
      </div>
    </div>
  </div>
</div>

<div
  *ngIf="selectedRequest"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"
>
  <div class="relative w-full max-w-xl mx-auto">
    <app-request-detail
      [request]="selectedRequest"
      (approve)="onApprove($event)"
      (reject)="onReject($event)"
    ></app-request-detail>
    <button
      class="absolute top-2 right-2 bg-gray-200 px-3 py-1 rounded hover:cursor-pointer"
      (click)="closeDetails()"
    >
      Close
    </button>
  </div>
</div>
<button
  *ngIf="selectedRequest"
  class="fixed top-4 right-4 bg-gray-200 px-3 py-1 rounded"
  (click)="closeDetails()"
>
  Close
</button>
